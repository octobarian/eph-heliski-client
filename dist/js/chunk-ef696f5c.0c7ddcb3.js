(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef696f5c"],{"023f":function(e,t,i){"use strict";var r=i("c427");class a{getAll(){return r["a"].get("/trips")}get(e){return r["a"].get("/trips/id/"+e)}update(e,t){return r["a"].put("/trips/id/"+e,t)}createTrip(e){return r["a"].post("/trips",e)}delete(e){return r["a"].delete("/trips/id/"+e)}deleteGroup(e){return r["a"].delete("/trips/group/"+e)}removeClientFromGroup(e,t){return r["a"].delete(`/trips/group/${e}/tripClient/${t}`)}createGroup(e){return r["a"].post("/trips/group/"+e)}updateGroupGuide(e,t){return r["a"].put(`/trips/group/${e}/guide`,{guideId:t})}updateGroupDate({groupId:e,tripId:t,newEndDate:i}){return r["a"].put(`/trips/groupDate/${t}/${e}`,{end_date:i})}fetchGuides(){return r["a"].get("/staff/job/2")}fetchPilots(){return r["a"].get("/staff/job/1")}fetchHelicopters(){return r["a"].get("/trips/helicopters")}fetchTripsByDate(e){return r["a"].get("/trips/date/"+e)}fetchGroupsForTrip(e){return r["a"].get("/trips/findgroups/"+e)}findByGuideAndDate(e,t){return r["a"].get(`/trips/findByGuideAndDate/${e}/${t}`)}assignReservationToTripGroup(e){return r["a"].post("/trips/assign",e)}removeReservationFromTrip(e,t){const i={tripId:e,reservationId:t};return r["a"].post("/trips/removereservation",i)}}t["a"]=new a},"13d5":function(e,t,i){"use strict";var r=i("23e7"),a=i("d58f").left,s=i("a640"),n=i("2d00"),o=i("605d"),l=!o&&n>79&&n<83,c=l||!s("reduce");r({target:"Array",proto:!0,forced:c},{reduce:function(e){var t=arguments.length;return a(this,e,t,t>1?arguments[1]:void 0)}})},"14d9":function(e,t,i){"use strict";var r=i("23e7"),a=i("7b0b"),s=i("07fa"),n=i("3a34"),o=i("3511"),l=i("d039"),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),d=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},p=c||!d();r({target:"Array",proto:!0,arity:1,forced:p},{push:function(e){var t=a(this),i=s(t),r=arguments.length;o(i+r);for(var l=0;l<r;l++)t[i]=arguments[l],i++;return n(t,i),i}})},1891:function(e,t,i){"use strict";var r=i("c427");class a{getAllBeacons(){return r["a"].get("/equipment/beacon")}getBeacon(e){return r["a"].get("/equipment/beacon/"+e)}createBeacon(e){return r["a"].post("/equipment/beacon",e)}deleteBeacon(e){return r["a"].delete("/equipment/beacon/"+e)}deactivateBeacon(e){return r["a"].put("/equipment/beacon/deactivate/"+e)}reactivateBeacon(e){return r["a"].put("/equipment/beacon/activate/"+e)}unlinkBeaconFromTrip(e){return r["a"].put("/equipment/beacon/unlink/"+e)}assignBeaconToTripClient(e,t){return r["a"].put("/equipment/beacon/assign/"+e,{tripClientId:t})}createHelicopter(e){return r["a"].post("/equipment/helicopter",e)}getHelicopters(){return r["a"].get("/equipment/helicopter")}deleteHelicopter(e){return r["a"].delete("/equipment/helicopter/"+e)}editHelicopter(e,t){return r["a"].put("/equipment/helicopter/"+e,t)}}t["a"]=new a},"22c0":function(e,t,i){},"298b":function(e,t,i){"use strict";var r=i("c427");class a{getAll(){return r["a"].get("/staff")}get(e){return r["a"].get("/staff/id/"+e)}create(e){return r["a"].post("/staff",e)}update(e,t){return r["a"].put("/staff/id/"+e,t)}delete(e){return r["a"].delete("/staff/id/"+e)}findByName(e){return r["a"].get("/staff?name="+e)}findByEmail(e){return r["a"].get("/staff/email/"+e)}fetchJobs(){return r["a"].get("/staff/jobs")}}t["a"]=new a},"2b8d":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"admin-dashboard"},[t("div",{staticClass:"main-content"},[t("div",{staticClass:"header"},[t("h1",[e._v("Admin Dashboard")]),t("div",{staticClass:"date-picker-container"},[t("label",{attrs:{for:"selectedDate"}},[e._v("Selected Date:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedDate,expression:"selectedDate"}],staticClass:"date-picker",attrs:{type:"date",id:"selectedDate"},domProps:{value:e.selectedDate},on:{change:e.fetchTripsByDate,input:function(t){t.target.composing||(e.selectedDate=t.target.value)}}})])]),t("div",{staticClass:"row trips-container"},[e._l(e.trips,(function(i,r){return t("div",{key:i.tripid,staticClass:"col-lg-6 col-md-12 mb-4"},[t("TripCard",{attrs:{tripData:i,tripNumber:r+1,allPilots:e.pilots,allGuides:e.guides,allHelicopters:e.helicopters,allBeacons:e.beacons},on:{tripDeleted:e.handleTripDeleted,removeReservationFromTrip:e.handleRemoveReservationFromTrip,clientRemoved:e.handleClientRemoved}})],1)})),t("div",{staticClass:"col-lg-6 col-md-12 mb-4 new-trip-card",on:{click:e.createNewTrip}},[t("span",{staticClass:"plus-symbol"},[e._v("+")]),t("span",[e._v("Create New Trip")])])],2)]),t("div",{staticClass:"admin-actions"},[t("unassigned-reservations",{attrs:{unassignedReservations:e.unassignedReservations,trips:e.trips},on:{reservationAssigned:e.handleReservationAssignment}})],1)])},a=[],s=(i("14d9"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"trip-card card"},[t("div",{staticClass:"card-header"},[t("div",{staticClass:"row"},[t("h2",{staticClass:"tripnumberheader"},[e._v("Heli #"+e._s(e.tripNumber))]),t("p",[e._v("Trip ID: "+e._s(e.tripData.tripId))])]),t("div",{staticClass:"row pilots-helicopters-section"},[t("div",{staticClass:"pilots-section"},[t("label",[e._v("Pilot:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editableTripData.pilotId,expression:"editableTripData.pilotId"}],staticClass:"form-select",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editableTripData,"pilotId",t.target.multiple?i:i[0])}}},[t("option",{attrs:{disabled:"",value:""}},[e._v("Select a Pilot")]),e._l(e.allPilots,(function(i){return t("option",{key:i.staffid,domProps:{value:i.staffid}},[e._v(" "+e._s(i.person.firstname)+" "+e._s(i.person.lastname)+" ")])}))],2)]),t("div",{staticClass:"helicopter-section"},[t("label",[e._v("Helicopter:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editableTripData.helicopterId,expression:"editableTripData.helicopterId"}],staticClass:"form-select",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editableTripData,"helicopterId",t.target.multiple?i:i[0])}}},[t("option",{attrs:{disabled:"",value:""}},[e._v("Select a Helicopter")]),e._l(e.allHelicopters,(function(i){return t("option",{key:i.helicopterid,domProps:{value:i.helicopterid}},[e._v(" "+e._s(i.model)+" ("+e._s(i.callsign)+") ")])}))],2)])]),t("button",{staticClass:"btn btn-danger",on:{click:e.confirmDeletion}},[t("svg",{staticClass:"bi bi-trash",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}}),t("path",{attrs:{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"}})])])]),t("div",{staticClass:"card-body"},[t("div",{staticClass:"trip-groups-header"},[t("h5",{staticClass:"card-title"},[e._v("Heli Groups")]),t("button",{staticClass:"btn btn-primary",on:{click:e.createNewGroup}},[e._v("New Group")])]),t("div",{staticClass:"trip-groups-container"},e._l(e.tripData.groups,(function(i){return t("trip-group",{key:i.groupid,attrs:{"group-id":i.groupid,groupEndDate:i.end_date,guide:i.guide,clients:i.clients,"all-guides":e.allGuides,"all-beacons":e.allBeacons},on:{"update:guide":(t,i)=>e.handleUpdateGuide(t,i),updateEndDate:t=>e.updateGroupDate(t),deleteGroup:()=>e.handleDeleteGroup(i.groupid),removeGuide:t=>e.handleRemoveGuide(t),removeClient:t=>e.handleRemoveClient(t)}})})),1),t("label",[e._v("Notes:")]),t("div",{staticClass:"notes-container"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.noteContent,expression:"noteContent"}],domProps:{value:e.noteContent},on:{input:function(t){t.target.composing||(e.noteContent=t.target.value)}}}),t("button",{staticClass:"save-note",on:{click:e.saveNote}},[e._v("Save Note")])])])])}),n=[],o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"trip-group"},[t("div",{staticClass:"group-header"},[t("span",{staticClass:"group-id-label"},[e._v("GID: "+e._s(e.groupId))]),t("span",{staticClass:"group-info"},[e._v("Clients: "+e._s(e.clientCount)+" | Total Weight: "+e._s(e.totalWeight)+"lb")]),t("button",{staticClass:"collapse-btn",on:{click:function(t){e.isCollapsed=!e.isCollapsed}}},[e.isCollapsed?t("span",[t("svg",{staticClass:"bi bi-caret-up",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M3.204 11h9.592L8 5.519zm-.753-.659 4.796-5.48a1 1 0 0 1 1.506 0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 0 1-.753-1.659"}})])]):t("span",[t("svg",{staticClass:"bi bi-caret-down",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M3.204 5h9.592L8 10.481zm-.753.659 4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659"}})])])]),e.isCollapsed?e._e():t("button",{staticClass:"delete-group-btn",on:{click:function(t){return e.deleteGroup(e.groupId)}}},[e._v(" Delete Group "),t("svg",{staticClass:"bi bi-trash3",staticStyle:{"margin-left":"15px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"}})])])]),e.isCollapsed?e._e():t("div",{staticClass:"group-details"},[t("div",{staticClass:"guide-dropdown"},[t("label",[e._v("Guide: ")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedGuideId,expression:"selectedGuideId"}],staticStyle:{"margin-left":"10px"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedGuideId=t.target.multiple?i:i[0]}}},[t("option",{attrs:{disabled:"",value:""}},[e._v("Select a Guide")]),e._l(e.allGuides,(function(i){return t("option",{key:i.staffid,domProps:{value:i.staffid}},[e._v(" "+e._s(i.person.firstname)+" "+e._s(i.person.lastname)+" ")])}))],2)]),t("div",{staticClass:"continue-section"},[t("label",[e._v("Continue till: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.groupEndDate,expression:"groupEndDate"}],staticClass:"continue-till-date",staticStyle:{"margin-left":"10px"},attrs:{type:"date"},domProps:{value:e.groupEndDate},on:{change:e.emitDateChange,input:function(t){t.target.composing||(e.groupEndDate=t.target.value)}}})]),t("div",{staticClass:"clients-section"},[t("label",{staticClass:"group-members-label"},[e._v("Group Members:")]),t("div",{staticClass:"client-grid"},e._l(e.localClients,(function(i,r){return t("div",{key:i.reservationid,staticClass:"client-card"},[t("div",{staticClass:"row client-information-sections"},[t("span",{staticClass:"age-emoji",style:e.getAgeStyle(i.person.age)},[e._v(e._s(e.getAgeEmoji(i.person.age)))]),e._v(" "+e._s(i.person.firstname)+" "+e._s(i.person.lastname)+" "),t("button",{staticClass:"remove-client-btn",on:{click:function(t){return e.emitRemoveClient(i,r)}}},[e._v("x")])]),t("div",{staticClass:"row beacon-selection-section"},[t("select",{directives:[{name:"model",rawName:"v-model",value:i.selectedBeaconId,expression:"client.selectedBeaconId"}],on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(i,"selectedBeaconId",t.target.multiple?r:r[0])},function(t){return e.onBeaconSelect(r)}]}},[t("option",{attrs:{disabled:"",value:""}},[e._v("Select a Beacon")]),e._l(e.allBeacons,(function(i){return t("option",{key:i.beaconid,domProps:{value:i.beaconid}},[e._v(" "+e._s(i.beaconnumber)+" ")])}))],2)])])})),0)])])])},l=[],c=(i("13d5"),i("1891")),d={props:{groupId:Number,guide:{type:[Object,null],default:()=>null,required:!1},clients:{type:Array,default:()=>[]},allGuides:{type:Array,required:!0},allBeacons:Array,groupEndDate:String},methods:{getAgeEmoji(e){return e<18?"👶🏻":e>65?"👴🏻":""},getAgeStyle(e){return e<18?{fontSize:"25px",backgroundColor:"lightgreen",display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",width:"33px",height:"33px"}:e>64?{fontSize:"25px",backgroundColor:"lightcoral",display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",width:"33px",height:"33px"}:{}},deleteGroup(e){this.$emit("deleteGroup",e)},emitRemoveGuide(e){this.$emit("removeGuide",e)},emitRemoveClient(e){console.log(e),this.$emit("removeClient",{tripClientId:e.tripClientId,groupId:this.groupId})},emitDateChange(){this.$emit("updateEndDate",{groupId:this.groupId,newEndDate:this.continueTillDate})},assignBeacon(e,t){c["a"].assignBeaconToTripClient(e,t).then(()=>{console.log(`Beacon ${e} assigned to TripClient ${t} successfully.`)}).catch(e=>{console.error("Error assigning beacon to trip client:",e)})},onBeaconSelect(e){const t=this.localClients[e];t.selectedBeaconId&&t.tripClientId&&this.assignBeacon(t.selectedBeaconId,t.tripClientId)},initializeClients(){this.localClients=this.clients.map(e=>({...e,selectedBeaconId:e.beacon?e.beacon.beaconid:null}))}},data(){return{isCollapsed:!0,localClients:this.clients||[],continueTillDate:this.groupEndDate||""}},watch:{clients:{handler(e){this.localClients=e||[]},deep:!0,immediate:!0}},computed:{clientCount(){return this.localClients?this.localClients.length:0},totalWeight(){return this.localClients.reduce((e,t)=>{const i=parseInt(t.person&&t.person.weight);return e+(isNaN(i)?0:i)},0)},selectedGuideId:{get(){if(this.guide&&this.guide.guideid){const e=this.allGuides.find(e=>e.staffid===this.guide.guideid);return e?e.staffid:""}return""},set(e){if(e){let t=this.allGuides.find(t=>t.staffid===e);t&&this.$emit("update:guide",t.staffid,this.groupId)}}}},created(){this.initializeClients()}},p=d,u=(i("adbf"),i("2877")),h=Object(u["a"])(p,o,l,!1,null,"fbae48a2",null),v=h.exports,g=i("023f"),f=i("93e8"),m=i("298b"),b={props:{tripData:{type:Object,required:!0},tripNumber:{type:Number,required:!0},allPilots:{type:Array,required:!0},allGuides:{type:Array,required:!0},allHelicopters:{type:Array,required:!0},allBeacons:Array},mounted(){this.fetchNote(),this.fetchLoggedInPersonId()},components:{TripGroup:v},data(){return{selectedGuideId:"",editableTripData:{pilotId:this.tripData.pilot?this.tripData.pilot.staffid:"",helicopterId:this.tripData.helicopter?this.tripData.helicopter.helicopterid:"",notes:this.tripData.notes?this.tripData.notes:[],guides:this.tripData.guides||[]},totalGearWeight:0,noteContent:"",noteId:null,loggedInPersonId:null,tripGroups:this.tripData.groups||[]}},watch:{"editableTripData.pilotId":function(e,t){e!==t&&this.updateTrip()},"editableTripData.helicopterId":function(e,t){e!==t&&this.updateTrip()},selectedGuideId(e){if(e){const t=this.allGuides.find(t=>t.staffid==e);t&&!this.tripData.guides.some(e=>e.personid===t.person.personid)&&(this.tripData.guides.push({...t.person}),this.updateTrip()),this.selectedGuideId=""}}},computed:{availableGuides(){return this.allGuides.map(e=>{const t=this.tripData.guides.some(t=>t.personid===e.person.personid);return{...e,isDisabled:t}})}},methods:{createNewGroup(){console.log("Creating a new group for trip ID:",this.tripData.tripId),g["a"].createGroup(this.tripData.tripId).then(e=>{console.log("New group created successfully:",e.data),this.tripData.groups=[...this.tripData.groups,e.data],this.$emit("clientRemoved")}).catch(e=>{console.error("Error creating new group:",e)})},handleDeleteGroup(e){const t=window.confirm("Deleting the group will unassign all clients in the group, are you sure you want to delete this group?");t?g["a"].deleteGroup(e).then(()=>{console.log("Group deleted successfully"),this.tripData.groups=this.tripData.groups.filter(t=>t.groupid!==e),this.$emit("clientRemoved")}).catch(e=>{console.error("Error deleting group:",e)}):console.log("Group deletion cancelled.")},handleRemoveGuide(e){console.log("Removing guide:",e)},handleRemoveClient(e){console.log(e),g["a"].removeClientFromGroup(e.groupId,e.tripClientId).then(()=>{console.log("Client removed from group successfully"),this.$emit("clientRemoved",e)}).catch(e=>{console.error("Error removing client from group:",e)})},handleUpdateGuide(e,t){console.log(`Updating guide ${e} for group ${t}`),g["a"].updateGroupGuide(t,e).then(()=>{console.log("Guide updated successfully")}).catch(e=>{console.error("Error updating guide:",e)})},fetchLoggedInPersonId(){const e=sessionStorage.getItem("email");e&&m["a"].findByEmail(e).then(e=>{this.loggedInPersonId=e.data.personid}).catch(e=>{console.error("Error fetching staff info:",e)})},fetchNote(){f["a"].getTripNote(this.tripData.tripId).then(e=>{e.data&&null!==e.data.text?(this.noteContent=e.data.text,this.noteId=e.data.noteid):(this.noteContent="",this.noteId=null)}).catch(e=>{console.error("Error fetching note:",e),e.response&&404===e.response.status&&(this.noteContent="",this.noteId=null)})},saveNote(){if(!this.loggedInPersonId)return void console.error("No logged in person ID found");const e={text:this.noteContent,personid:this.loggedInPersonId,type:"tripnote",itemid:this.tripData.tripId};this.noteId?f["a"].update(this.noteId,e).then(()=>{console.log("Note updated successfully"),this.updateTrip()}).catch(e=>{console.error("Error updating note:",e)}):f["a"].create(e).then(e=>{this.noteId=e.data.noteid,console.log("Note created successfully"),this.updateTrip()}).catch(e=>{console.error("Error creating note:",e)})},handleGearWeightUpdate(e){console.log(e)},updateTrip(){const e={pilotid:this.editableTripData.pilotId,helicopterid:this.editableTripData.helicopterId};g["a"].update(this.tripData.tripId,e).then(e=>{this.tripData.helicopterId=this.editableTripData.helicopterId,this.tripData.pilotId=this.editableTripData.pilotId,console.log(e)}).catch(e=>{console.error("Error updating trip:",e)})},updateGroupDate({groupId:e,newEndDate:t}){const i=this.tripData.tripId;console.log("Update"+i+" gid"+e+" NED"+t),g["a"].updateGroupDate({groupId:e,tripId:i,newEndDate:t}).then(i=>{console.log("Group end date updated successfully:",i),this.$emit("groupDateUpdated",{groupId:e,newEndDate:t})}).catch(e=>{console.error("Error updating group end date:",e)})},removeGuide(e){this.tripData.guides=this.tripData.guides.filter(t=>t.personid!==e.personid),this.updateTrip()},removeClient(e){this.tripData.clientids.splice(e,1),this.updateTrip()},removeReservation(e){this.$emit("removeReservationFromTrip",{tripId:this.tripData.tripid,reservationId:e}),this.updateTrip()},confirmDeletion(){window.confirm("Are you sure you want to delete this trip? This action cannot be undone.")&&this.deleteTrip()},deleteTrip(){g["a"].delete(this.tripData.tripId).then(()=>{this.$emit("tripDeleted",this.tripData.tripId)}).catch(e=>{console.error("Error deleting trip:",e)})}}},C=b,D=(i("945b"),Object(u["a"])(C,s,n,!1,null,"350ce43a",null)),y=D.exports,_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"unassigned-reservations"},[t("h3",[e._v("Unassigned Reservations")]),e._l(e.unassignedReservations,(function(i){return t("unassigned-reservation",{key:i.reservationid,attrs:{reservation:i,trips:e.trips},on:{assignReservation:e.handleAssignment}})}))],2)},w=[],I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"unassigned-reservation card mb-3"},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"d-flex justify-content-between align-items-center"},[t("h5",{staticClass:"card-title mb-0"},[t("router-link",{staticClass:"reservation-link",attrs:{to:"/reservation/"+e.reservation.reservationid}},[e._v(" "+e._s(e.reservation.clientName)+" ")]),t("span",{staticClass:"email-text"},[e._v("- "+e._s(e.reservation.email))])],1),t("div",{staticClass:"id-box"},[e._v("ID: "+e._s(e.reservation.reservationid))])]),t("div",{staticClass:"card-text"},[t("div",{staticClass:"activity-label"},[t("label",[e._v("Activity:")]),t("div",{staticClass:"activity-box",class:e.activityClass},[e._v(e._s(e.reservation.activityName))])]),e.reservation.groupcode?t("p",[e._v("Group Code: "+e._s(e.reservation.groupcode))]):e._e(),t("p",{},[e._v("Weight: "+e._s(e.reservation.weight)+" lb")]),t("div",{staticClass:"details-expandable"},[t("div",{staticClass:"details-toggle",on:{click:e.toggleDetails}},[e._v(" Reservation Details "),t("span",{staticClass:"arrow"},[e._v(e._s(e.showDetails?"▲":"▼"))])]),e.showDetails?t("div",{staticClass:"detail-section"},e._l(e.reservation.reservationDetails,(function(i,r){return t("div",{key:r},e._l(i,(function(i,r){return t("div",{key:r,staticClass:"detail-item"},["activity"!==r?t("span",{staticClass:"detail-key"},[e._v(e._s(e.formatKey(r))+":")]):e._e(),"activity"!==r?t("span",{staticClass:"detail-value"},[e._v(e._s(e.formatValue(i)))]):e._e(),"activity"===r?t("div",{staticClass:"activity-box"},[e._v(e._s(i.activityname))]):e._e()])})),0)})),0):e._e()])]),t("div",{staticClass:"row"},[t("div",{staticClass:"select-group"},[t("label",{attrs:{for:"UAtrip-selector"}},[e._v("Trip ID:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedTrip,expression:"selectedTrip"}],staticClass:"UAtrip-selector form-select me-2",attrs:{name:"UAtrip-selector"},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedTrip=t.target.multiple?i:i[0]},e.fetchGroupsForTrip]}},[t("option",{attrs:{disabled:"",value:""}},[e._v("Select Trip")]),e._l(e.trips,(function(i){return t("option",{key:i.tripId,domProps:{value:i.tripId}},[e._v(" #"+e._s(i.tripId)+" ")])}))],2)]),e.showGroupDropdown?t("div",{staticClass:"select-group"},[t("label",{attrs:{for:"UAgroup-selector"}},[e._v("Group ID:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedGroup,expression:"selectedGroup"}],staticClass:"UAgroup-selector form-select me-2",attrs:{name:"UAgroup-selector"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedGroup=t.target.multiple?i:i[0]}}},[t("option",{attrs:{disabled:"",value:""}},[e._v("Select Group")]),e._l(e.groups,(function(i){return t("option",{key:i.trip_group_id,domProps:{value:i.trip_group_id}},[e._v(" #"+e._s(i.trip_group_id)+" ")])}))],2)]):e._e()]),e.selectedGroup?t("button",{staticClass:"btn assign-button",on:{click:e.assignToGroup}},[e._v("Assign")]):e._e()])])},G=[],T={props:{reservation:Object,trips:Array},data(){return{selectedTrip:"",selectedGroup:"",showDetails:!1,showGroupDropdown:!1,groups:[]}},methods:{fetchGroupsForTrip(){this.showGroupDropdown=!1,this.selectedTrip&&g["a"].fetchGroupsForTrip(this.selectedTrip).then(e=>{this.groups=e.data,this.selectedGroup="",this.groups.length>0&&(this.showGroupDropdown=!0)}).catch(e=>{console.error("Error fetching groups:",e)})},assignToGroup(){this.$emit("assignReservation",{tripId:this.selectedTrip,groupId:this.selectedGroup,reservationId:this.reservation.reservationid,personId:this.reservation.personid})},formatKey(e){return e.replace(/_/g," ").replace(/(?:^|\s)\S/g,(function(e){return e.toUpperCase()}))},formatValue(e){return null===e?"None":e},toggleDetails(){this.showDetails=!this.showDetails}},computed:{activityClass(){return this.reservation.activityName.toLowerCase().includes("private")?"private-event":this.reservation.activityName.toLowerCase().includes("media")?"media-event":this.reservation.activityName.toLowerCase().includes("lodge")?"lodge-event":this.reservation.activityName.toLowerCase().includes("day")?"day-event":""}}},A=T,x=(i("6bbd"),Object(u["a"])(A,I,G,!1,null,"31c702fe",null)),B=x.exports,R={components:{UnassignedReservation:B},props:{unassignedReservations:Array,trips:Array},methods:{handleAssignment(e){this.$emit("reservationAssigned",e)}}},E=R,N=Object(u["a"])(E,_,w,!1,null,null,null),k=N.exports,P=i("db84"),$={components:{TripCard:y,UnassignedReservations:k},data(){return{selectedDate:(new Date).toISOString().split("T")[0],trips:[],pilots:[],guides:[],helicopters:[],unassignedReservations:[],beacons:[]}},methods:{fetchTripsByDate(){g["a"].fetchTripsByDate(this.selectedDate).then(e=>{this.trips=e.data.sort((e,t)=>e.tripid-t.tripid)}).catch(e=>{console.error("Error fetching trips:",e),this.trips=[]}),this.fetchUnassignedReservations()},fetchUnassignedReservations(){P["a"].findByDate(this.selectedDate).then(e=>{this.unassignedReservations=e.data}).catch(e=>{console.error("Error fetching unassigned reservations:",e)})},handleClientRemoved(){this.fetchTripsByDate(),this.fetchUnassignedReservations()},handleReservationAssignment(e){g["a"].assignReservationToTripGroup(e).then(()=>{this.updateLocalDataAfterAssignment(e),this.fetchTripsByDate()}).catch(e=>{console.error("Error assigning reservation to trip:",e)})},handleRemoveReservationFromTrip(e){g["a"].removeReservationFromTrip(e.tripId,e.reservationId).then(()=>{this.fetchTripsByDate()}).catch(e=>{console.error("Error removing reservation from trip:",e)})},updateLocalDataAfterAssignment(e){this.unassignedReservations=this.unassignedReservations.filter(t=>t.reservationid!==e.reservationId);const t=this.trips.find(t=>t.tripid===e.tripId);t&&(t.reservationids||(t.reservationids=[]),t.reservationids.push(e.reservationId)),this.trips=[...this.trips].sort((e,t)=>e.tripid-t.tripid)},createNewTrip(){const e={date:this.selectedDate};g["a"].createTrip(e).then(e=>{this.trips.push(e.data),this.fetchTripsByDate()}).catch(e=>{console.error("Error creating new trip:",e)})},handleTripDeleted(e){this.trips=this.trips.filter(t=>t.tripid!==e),this.fetchTripsByDate()},fetchPilots(){g["a"].fetchPilots().then(e=>{this.pilots=e.data}).catch(e=>{console.error("Error fetching pilots:",e)})},fetchGuides(){g["a"].fetchGuides().then(e=>{this.guides=e.data}).catch(e=>{console.error("Error fetching guides:",e)})},fetchHelicopters(){g["a"].fetchHelicopters().then(e=>{this.helicopters=e.data}).catch(e=>{console.error("Error fetching helicopters:",e)})},fetchBeacons(){c["a"].getAllBeacons().then(e=>{this.beacons=e.data}).catch(e=>{console.error("Error fetching beacons:",e)})}},created(){this.fetchTripsByDate(),this.fetchPilots(),this.fetchGuides(),this.fetchHelicopters(),this.fetchTripsByDate(),this.fetchBeacons()}},H=$,S=(i("cbd2"),Object(u["a"])(H,r,a,!1,null,"7affb89f",null));t["default"]=S.exports},3511:function(e,t,i){"use strict";var r=TypeError,a=9007199254740991;e.exports=function(e){if(e>a)throw r("Maximum allowed index exceeded");return e}},"3a34":function(e,t,i){"use strict";var r=i("83ab"),a=i("e8b5"),s=TypeError,n=Object.getOwnPropertyDescriptor,o=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=o?function(e,t){if(a(e)&&!n(e,"length").writable)throw new s("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},"5a86":function(e,t,i){},"605d":function(e,t,i){"use strict";var r=i("da84"),a=i("c6b6");e.exports="process"===a(r.process)},"6bbd":function(e,t,i){"use strict";i("5a86")},"7c8e":function(e,t,i){},"93e8":function(e,t,i){"use strict";var r=i("c427");class a{create(e){return r["a"].post("/notes",e)}getAll(){return r["a"].get("/notes")}get(e){return r["a"].get("/notes/"+e)}getTripNote(e){return r["a"].get("/notes/trip/"+e)}update(e,t){return r["a"].put("/notes/"+e,t)}delete(e){return r["a"].delete("/notes/"+e)}}t["a"]=new a},"945b":function(e,t,i){"use strict";i("bc0b")},a640:function(e,t,i){"use strict";var r=i("d039");e.exports=function(e,t){var i=[][e];return!!i&&r((function(){i.call(null,t||function(){return 1},1)}))}},adbf:function(e,t,i){"use strict";i("7c8e")},bc0b:function(e,t,i){},c427:function(e,t,i){"use strict";var r=i("cee4");t["a"]=r["a"].create({baseURL:"https://eebackend.azurewebsites.net:/api",headers:{"Content-type":"application/json"}})},cbd2:function(e,t,i){"use strict";i("22c0")},d58f:function(e,t,i){"use strict";var r=i("59ed"),a=i("7b0b"),s=i("44ad"),n=i("07fa"),o=TypeError,l="Reduce of empty array with no initial value",c=function(e){return function(t,i,c,d){var p=a(t),u=s(p),h=n(p);if(r(i),0===h&&c<2)throw new o(l);var v=e?h-1:0,g=e?-1:1;if(c<2)while(1){if(v in u){d=u[v],v+=g;break}if(v+=g,e?v<0:h<=v)throw new o(l)}for(;e?v>=0:h>v;v+=g)v in u&&(d=i(d,u[v],v,p));return d}};e.exports={left:c(!1),right:c(!0)}},db84:function(e,t,i){"use strict";var r=i("c427");class a{getAll(){return r["a"].get("/reservations")}search(e){return r["a"].get("/reservations/search?q="+e)}get(e){return r["a"].get("/reservations/id/"+e)}findByGroupCode(e){return r["a"].get("/reservations?groupCode="+e)}findByPersonId(e){return r["a"].get("/reservations?personId="+e)}findByDate(e){return r["a"].get("/reservations/unassigned/"+e)}}t["a"]=new a},e8b5:function(e,t,i){"use strict";var r=i("c6b6");e.exports=Array.isArray||function(e){return"Array"===r(e)}}}]);
//# sourceMappingURL=chunk-ef696f5c.0c7ddcb3.js.map