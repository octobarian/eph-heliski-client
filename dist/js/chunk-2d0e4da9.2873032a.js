(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4da9"],{"023f":function(e,t,a){"use strict";var s=a("c427");class i{getAll(){return s["a"].get("/trips")}get(e){return s["a"].get("/trips/id/"+e)}update(e,t){return s["a"].put("/trips/id/"+e,t)}createTrip(e){return s["a"].post("/trips",e)}delete(e){return s["a"].delete("/trips/id/"+e)}deleteGroup(e){return s["a"].delete("/trips/group/"+e)}removeClientFromGroup(e,t){return s["a"].delete(`/trips/group/${e}/tripClient/${t}`)}createGroup(e){return s["a"].post("/trips/group/"+e)}updateGroupGuide(e,t){return s["a"].put(`/trips/group/${e}/guide`,{guideId:t})}updateGroupDate({groupId:e,tripId:t,newEndDate:a}){return s["a"].put(`/trips/groupDate/${t}/${e}`,{end_date:a})}fetchGuides(){return s["a"].get("/staff/job/2")}fetchPilots(){return s["a"].get("/staff/job/1")}fetchHelicopters(){return s["a"].get("/trips/helicopters")}fetchTripsByDate(e){return s["a"].get("/trips/date/"+e)}fetchGroupsForTrip(e){return s["a"].get("/trips/findgroups/"+e)}findByGuideAndDate(e,t){return s["a"].get(`/trips/findByGuideAndDate/${e}/${t}`)}assignReservationToTripGroup(e){return s["a"].post("/trips/assign",e)}removeReservationFromTrip(e,t){const a={tripId:e,reservationId:t};return s["a"].post("/trips/removereservation",a)}}t["a"]=new i},1891:function(e,t,a){"use strict";var s=a("c427");class i{getAllBeacons(){return s["a"].get("/equipment/beacon")}getBeacon(e){return s["a"].get("/equipment/beacon/"+e)}createBeacon(e){return s["a"].post("/equipment/beacon",e)}deleteBeacon(e){return s["a"].delete("/equipment/beacon/"+e)}deactivateBeacon(e){return s["a"].put("/equipment/beacon/deactivate/"+e)}reactivateBeacon(e){return s["a"].put("/equipment/beacon/activate/"+e)}unlinkBeaconFromTrip(e){return s["a"].put("/equipment/beacon/unlink/"+e)}assignBeaconToTripClient(e,t){return s["a"].put("/equipment/beacon/assign/"+e,{tripClientId:t})}createHelicopter(e){return s["a"].post("/equipment/helicopter",e)}getHelicopters(){return s["a"].get("/equipment/helicopter")}deleteHelicopter(e){return s["a"].delete("/equipment/helicopter/"+e)}editHelicopter(e,t){return s["a"].put("/equipment/helicopter/"+e,t)}}t["a"]=new i},"21bb":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"guide-dashboard"},[t("div",{staticClass:"header d-flex justify-content-between align-items-center p-3 mb-3"},[t("h1",[e._v("Guide Dashboard")]),t("div",{staticClass:"date-selector"},[t("label",{staticClass:"form-label me-2",attrs:{for:"selectedDate"}},[e._v("Selected Date:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedDate,expression:"selectedDate"}],staticClass:"form-control form-control-lg",attrs:{type:"date",id:"selectedDate"},domProps:{value:e.selectedDate},on:{change:e.fetchTripsForGuide,input:function(t){t.target.composing||(e.selectedDate=t.target.value)}}})])]),e.trips?t("div",{staticClass:"content"},e._l(e.trips,(function(a,s){return t("div",{key:a.tripid,staticClass:"row trip-row mb-4"},[t("div",{staticClass:"col-md-6"},[t("TripCardView",{staticClass:"trip-card-view",attrs:{tripData:a,tripNumber:s+1}})],1),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"passenger-info-box p-3"},[t("h2",[e._v("Your Riders")]),e.beacons&&e.beacons.length?t("div",{staticClass:"passengers d-flex justify-content-start flex-wrap"},e._l(a.reservationPersons,(function(a){return t("PassengerCard",{key:a.reservationid,staticClass:"me-3",attrs:{passenger:e.formatPassengerData(a.person,a.tripclientid),activityname:a.activityName,beacons:e.beacons},on:{"beacon-change":e.handleBeaconAssignment}})})),1):e._e()])])])})),0):t("div",{staticClass:"content"},[e._m(0)])])},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"row trip-row mb-4"},[t("h2",[e._v("You have no assigned trips on this day")])])}],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"trip-card card"},[t("div",{staticClass:"card-header"},[t("h2",[e._v("Trip #"+e._s(e.tripNumber))]),t("p",[e._v("Trip ID: "+e._s(e.tripData.tripid))])]),t("div",{staticClass:"card-body"},[t("div",{staticClass:"guide-section"},[t("label",[e._v("Guides:")]),t("div",{staticClass:"selected-guides"},e._l(e.tripData.guides,(function(a){return t("span",{key:a.personid,staticClass:"guide-tag"},[e._v(" "+e._s(a.firstname)+" "+e._s(a.lastname)+" ")])})),0)]),t("div",{staticClass:"pilot-helicopter"},[t("p",[t("strong",[e._v("Pilot:")]),e._v(" "+e._s(e.tripData.pilot.firstname)+" "+e._s(e.tripData.pilot.lastname))]),t("p",[t("strong",[e._v("Helicopter:")]),e._v(" "+e._s(e.tripData.helicopter.model)+" ("+e._s(e.tripData.helicopter.callsign)+")")])]),t("div",{staticClass:"reservations-section"},[t("h5",{staticClass:"card-title"},[e._v("Reservations")]),t("div",{staticClass:"selected-reservations"},e._l(e.tripData.reservationPersons,(function(a){return t("span",{key:a.reservationid,staticClass:"reservation-tag"},[e._v(" "+e._s(a.person.firstname)+" "+e._s(a.person.lastname)+" - "+e._s(a.person.weight)+" kg ")])})),0)]),t("div",{staticClass:"notes-section"},[t("label",[e._v("Notes:")]),t("p",[e._v(e._s(e.noteContent))])])])])},n=[],o=a("93e8"),c={props:{tripData:{type:Object,required:!0},tripNumber:{type:Number,required:!0}},data(){return{noteContent:""}},methods:{fetchNote(){o["a"].getTripNote(this.tripData.tripid).then(e=>{this.noteContent=e.data.text}).catch(e=>{console.error("Error fetching note:",e)})}},mounted(){this.fetchNote()}},d=c,l=(a("a5dd"),a("2877")),p=Object(l["a"])(d,r,n,!1,null,"0a9b0b61",null),u=p.exports,g=function(){var e=this,t=e._self._c;return t("div",{ref:"cardContainer",staticClass:"passenger-card"},[t("h3",{ref:"passengerName",staticClass:"passenger-name"},[e._v(e._s(e.passenger.name))]),t("div",{staticClass:"activity-label"},[t("label",[e._v("Activity:")]),t("div",{staticClass:"activity-box"},[e._v(e._s(e.activityname))])]),t("p",[t("strong",[e._v("Weight:")]),e._v(" "+e._s(e.passenger.weight)+" kg")]),e.passenger.additionalData?t("div",{staticClass:"additional-data"}):e._e(),t("div",{staticClass:"trip-client-id"},[e._v(" Trip Client ID: "+e._s(e.passenger.tripclientid)+" ")]),t("label",{staticClass:"beacon-label",attrs:{for:"dropdownMenuButton"}},[e._v("Beacon #")]),t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e._v(" "+e._s(e.selectedBeaconNumber||"Select Beacon")+" ")]),t("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},e._l(e.beacons,(function(a){return t("li",{key:a.beaconid},[t("a",{staticClass:"dropdown-item",class:{"text-danger":a.tripclientid,"text-dark":!a.tripclientid},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.handleBeaconChange(a.beaconid,a.beaconnumber)}}},[e._v(" "+e._s(a.beaconnumber)+" "+e._s(a.tripclientid?"Assigned":"")+" ")])])})),0)])])},f=[],h={props:{passenger:Object,activityname:String,beacons:Array},data(){return{selectedBeacon:null,selectedBeaconNumber:""}},watch:{beacons:{handler(e){const t=e.find(e=>e.tripclientid===this.passenger.tripclientid);t&&(this.selectedBeacon=t.beaconid,this.selectedBeaconNumber=t.beaconnumber)},deep:!0}},methods:{handleBeaconChange(e,t){this.selectedBeacon=e,this.selectedBeaconNumber=t,this.$emit("beacon-change",{beaconId:e,tripClientId:this.passenger.tripclientid})},resizeFont(){const e=this.$refs.passengerName,t=this.$refs.cardContainer.offsetWidth,a=this.passenger.name.length;if(a<=20){let a=20;e.style.fontSize=a+"px",e.style.whiteSpace="nowrap";while(e.scrollWidth>t&&a>8)a-=1,e.style.fontSize=a+"px"}else e.style.whiteSpace="normal",e.style.fontSize="initial"}},mounted(){this.resizeFont(),window.addEventListener("resize",this.resizeFont)},beforeDestroy(){window.removeEventListener("resize",this.resizeFont)},created(){const e=this.beacons.find(e=>e.tripclientid===this.passenger.tripclientid);e&&(this.selectedBeacon=e.beaconid,this.selectedBeaconNumber=e.beaconnumber)}},v=h,m=(a("7c9b"),Object(l["a"])(v,g,f,!1,null,"c630ccc6",null)),b=m.exports,_=a("298b"),C=a("023f"),w=a("1891"),y={components:{TripCardView:u,PassengerCard:b},data(){return{guideEmail:"",selectedDate:(new Date).toISOString().split("T")[0],trips:[],beacons:[]}},created(){this.fetchStaffId(),this.fetchTripsForGuide(),this.fetchAllBeacons()},methods:{fetchStaffId(){this.guideEmail=sessionStorage.getItem("email"),this.guideEmail&&_["a"].findByEmail(this.guideEmail).then(e=>{const t=e.data.staffid;sessionStorage.setItem("staffId",t)}).catch(e=>{console.error("Error fetching staff ID:",e)})},fetchTripsForGuide(){const e=sessionStorage.getItem("staffId");C["a"].findByGuideAndDate(e,this.selectedDate).then(e=>{this.trips=e.data,console.log(this.trips)}).catch(e=>{console.error("Error fetching trips for guide:",e)})},formatPassengerData(e,t){return{name:e.firstname+" "+e.lastname,activity:e.activityName,weight:e.weight,additionalData:e.additionalData,tripclientid:t}},fetchAllBeacons(){w["a"].getAllBeacons().then(e=>{this.beacons=e.data}).catch(e=>{console.error("Error fetching beacons:",e)})},handleBeaconAssignment({beaconId:e,tripClientId:t}){const a=this.beacons.find(t=>t.beaconid===e);a&&a.tripclientid&&a.tripclientid!==t?confirm("This beacon is already assigned to another passenger. Do you want to reassign it?")&&w["a"].unlinkBeaconFromTrip(e).then(()=>{w["a"].assignBeaconToTripClient(e,t)}):w["a"].assignBeaconToTripClient(e,t)}}},B=y,D=(a("d63c"),Object(l["a"])(B,s,i,!1,null,"68b04716",null));t["default"]=D.exports},"298b":function(e,t,a){"use strict";var s=a("c427");class i{getAll(){return s["a"].get("/staff")}get(e){return s["a"].get("/staff/id/"+e)}create(e){return s["a"].post("/staff",e)}update(e,t){return s["a"].put("/staff/id/"+e,t)}delete(e){return s["a"].delete("/staff/id/"+e)}findByName(e){return s["a"].get("/staff?name="+e)}findByEmail(e){return s["a"].get("/staff/email/"+e)}fetchJobs(){return s["a"].get("/staff/jobs")}}t["a"]=new i},"44cd":function(e,t,a){},"7c9b":function(e,t,a){"use strict";a("a300")},"93e8":function(e,t,a){"use strict";var s=a("c427");class i{create(e){return s["a"].post("/notes",e)}getAll(){return s["a"].get("/notes")}get(e){return s["a"].get("/notes/"+e)}getTripNote(e){return s["a"].get("/notes/trip/"+e)}update(e,t){return s["a"].put("/notes/"+e,t)}delete(e){return s["a"].delete("/notes/"+e)}}t["a"]=new i},a00c:function(e,t,a){},a300:function(e,t,a){},a5dd:function(e,t,a){"use strict";a("44cd")},c427:function(e,t,a){"use strict";var s=a("cee4");t["a"]=s["a"].create({baseURL:"https://eebackend.azurewebsites.net:/api",headers:{"Content-type":"application/json"}})},d63c:function(e,t,a){"use strict";a("a00c")}}]);
//# sourceMappingURL=chunk-2d0e4da9.2873032a.js.map